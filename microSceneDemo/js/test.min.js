$.microScene=function(n,f){if(typeof n=="function"){f=n;n={};}var e={pageFather:".showBox",page:".page",upPage:"upPage",nextPage:"nextPage",nowPage:"cur"};$.extend(e,n);function d(){event.preventDefault();}document.addEventListener("touchstart",d);document.addEventListener("touchmove",d);document.addEventListener("touchend",d);var b,a;function m(p,o){return Math.atan2(o,p)*180/Math.PI;}function g(r,p,u,t){var s=u-r;var q=t-p;var o=0;if(Math.abs(s)<2&&Math.abs(q)<2){return o;}var v=m(s,q);if(v>=-135&&v<=-45){o=1;}else{if(v>45&&v<135){o=2;}else{if((v>=135&&v<=180)||(v>=-180&&v<-135)){o=3;}else{if(v>=-45&&v<=45){o=4;}}}}return o;}document.addEventListener("touchstart",function(o){b=o.touches[0].pageX;a=o.touches[0].pageY;},false);document.addEventListener("touchend",function(r){var p,o;p=r.changedTouches[0].pageX;o=r.changedTouches[0].pageY;var q=g(b,a,p,o);switch(q){case 1:c();break;case 2:h();break;default:}},false);var k=$(window).height();$(e.page).height(k);$(e.pageFather).height(k);$("."+e.upPage).css({"top":-k});$("."+e.nextPage).css({"top":k});var j=0;var i=$(e.page).length;function l(o){for(var p=0;p<o;p++){$(e.page).eq(p).removeClass(e.nextPage).addClass(e.upPage);}for(var q=o+1;q<i;q++){$(e.page).eq(q).removeClass(e.upPage).addClass(e.nextPage);}$("."+e.upPage).css({"top":-k});$("."+e.nextPage).css({"top":k});f(o);}function c(){if(j<i-1){j++;console.log();$(e.page).eq(j).addClass(e.nowPage).removeClass(e.upPage).removeClass(e.nextPage).siblings().removeClass(e.nowPage);$(e.page).eq(j).animate({top:"0"},function(){l(j);});}}function h(){if(j>0){j--;$(e.page).eq(j).addClass(e.nowPage).removeClass(e.upPage).removeClass(e.nextPage).siblings().removeClass(e.nowPage);$(e.page).eq(j).animate({top:"0"},function(){l(j);});}}};